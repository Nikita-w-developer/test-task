{"ast":null,"code":"import{createSlice,createAsyncThunk}from\"@reduxjs/toolkit\";import axios from\"axios\";export const fetchProduct=createAsyncThunk(\"product/fetchProducts\",async()=>{const url=\"https://dummyjson.com/products\";const{data}=await axios.get(url);return data;});const initialState={items:JSON.parse(localStorage.getItem(\"productItems\"))||[],isLiked:[],sort:{name:\"Все товары\",property:\"all\"},currentId:1,searchValue:\"\"};export const productSlice=createSlice({name:\"product\",initialState,reducers:{replacedItem:(state,action)=>{const updatedProducts=action.payload;state.items=updatedProducts;},setSearchValue:(state,action)=>{state.searchValue=action.payload;},setNewItem:(state,action)=>{state.items.push(action.payload);localStorage.setItem(\"productItems\",JSON.stringify(state.items));},setCurrentId:(state,action)=>{state.currentId=action.payload;},addFavourite:(state,action)=>{const existing=state.isLiked.find(obj=>obj.id===action.payload.id);if(existing){state.isLiked=state.isLiked.filter(obj=>obj.id!==action.payload.id);}else{state.isLiked.push(action.payload);}},removeItem:(state,action)=>{state.items=state.items.filter(item=>item.id!==action.payload.id);state.isLiked=state.isLiked.filter(liked=>liked.id!==action.payload.id);},setSort:(state,action)=>{state.sort=action.payload;}},extraReducers:builder=>{builder.addCase(fetchProduct.fulfilled,(state,action)=>{state.items.push(action.payload.products);state.items=state.items.flat();localStorage.setItem(\"productItems\",JSON.stringify(state.items));});}});export const{addFavourite,removeItem,setSort,setCurrentId,setNewItem,setSearchValue,replacedItem}=productSlice.actions;export default productSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","fetchProduct","url","data","get","initialState","items","JSON","parse","localStorage","getItem","isLiked","sort","name","property","currentId","searchValue","productSlice","reducers","replacedItem","state","action","updatedProducts","payload","setSearchValue","setNewItem","push","setItem","stringify","setCurrentId","addFavourite","existing","find","obj","id","filter","removeItem","item","liked","setSort","extraReducers","builder","addCase","fulfilled","products","flat","actions","reducer"],"sources":["D:/Projects/test-task/src/redux/Slices/productSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nexport const fetchProduct = createAsyncThunk(\r\n  \"product/fetchProducts\",\r\n  async () => {\r\n    const url = \"https://dummyjson.com/products\";\r\n    const { data } = await axios.get(url);\r\n    return data;\r\n  }\r\n);\r\n\r\nconst initialState = {\r\n  items: JSON.parse(localStorage.getItem(\"productItems\")) || [],\r\n  isLiked: [],\r\n  sort: { name: \"Все товары\", property: \"all\" },\r\n  currentId: 1,\r\n  searchValue: \"\",\r\n};\r\n\r\nexport const productSlice = createSlice({\r\n  name: \"product\",\r\n  initialState,\r\n  reducers: {\r\n    replacedItem: (state, action) => {\r\n      const updatedProducts = action.payload;\r\n      state.items = updatedProducts;\r\n    },\r\n    setSearchValue: (state, action) => {\r\n      state.searchValue = action.payload;\r\n    },\r\n    setNewItem: (state, action) => {\r\n      state.items.push(action.payload);\r\n      localStorage.setItem(\"productItems\", JSON.stringify(state.items));\r\n    },\r\n    setCurrentId: (state, action) => {\r\n      state.currentId = action.payload;\r\n    },\r\n    addFavourite: (state, action) => {\r\n      const existing = state.isLiked.find(\r\n        (obj) => obj.id === action.payload.id\r\n      );\r\n      if (existing) {\r\n        state.isLiked = state.isLiked.filter(\r\n          (obj) => obj.id !== action.payload.id\r\n        );\r\n      } else {\r\n        state.isLiked.push(action.payload);\r\n      }\r\n    },\r\n\r\n    removeItem: (state, action) => {\r\n      state.items = state.items.filter((item) => item.id !== action.payload.id);\r\n      state.isLiked = state.isLiked.filter(\r\n        (liked) => liked.id !== action.payload.id\r\n      );\r\n    },\r\n    setSort: (state, action) => {\r\n      state.sort = action.payload;\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder.addCase(fetchProduct.fulfilled, (state, action) => {\r\n      state.items.push(action.payload.products);\r\n      state.items = state.items.flat();\r\n      localStorage.setItem(\"productItems\", JSON.stringify(state.items));\r\n    });\r\n  },\r\n});\r\n\r\nexport const {\r\n  addFavourite,\r\n  removeItem,\r\n  setSort,\r\n  setCurrentId,\r\n  setNewItem,\r\n  setSearchValue,\r\n  replacedItem,\r\n} = productSlice.actions;\r\n\r\nexport default productSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}