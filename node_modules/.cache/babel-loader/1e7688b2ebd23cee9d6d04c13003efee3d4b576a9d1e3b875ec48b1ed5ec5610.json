{"ast":null,"code":"import React from\"react\";import styles from\"./EditForm.module.scss\";import{useDispatch,useSelector}from\"react-redux\";import{setFormField,setFormImage}from\"../../redux/Slices/replaceProductSlice\";import{replacedItem}from\"../../redux/Slices/productSlice\";import{setParams}from\"../../redux/Slices/editProductSlice\";import{useNavigate}from\"react-router-dom\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const EditFrom=_ref=>{let{onSubmit,id}=_ref;const dispatch=useDispatch();const data=useSelector(state=>state.editProductSlice);const editData=useSelector(state=>state.replaceProductSlice);const navigate=useNavigate();React.useEffect(()=>{const products=JSON.parse(localStorage.getItem(\"productItems\"))||[];const product=products.find(item=>item.id===id);if(product){dispatch(setFormField({field:\"title\",value:product.title}));dispatch(setFormField({field:\"price\",value:product.price}));dispatch(setFormField({field:\"description\",value:product.description}));dispatch(setFormField({field:\"imageUrl\",value:product.imageUrl}));}},[id,dispatch]);const handleChange=event=>{const{name,value}=event.target;dispatch(setFormField({field:name,value}));};const handleImageChange=event=>{const file=event.target.files[0];if(file){const reader=new FileReader();reader.onloadend=()=>{dispatch(setFormImage({...editData,imageUrl:reader.result}));};reader.readAsDataURL(file);}};const handleSubmit=event=>{event.preventDefault();handleSaveCard();if(onSubmit)onSubmit(editData);};const handleSaveCard=()=>{const products=JSON.parse(localStorage.getItem(\"productItems\"))||[];const currentId=data.id;const updatedFormData={...editData,id:currentId};console.log(\"–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–∞:\",updatedFormData);const productsUpdate=products.map(obj=>obj.id===data.id?{...obj,...updatedFormData}:obj);console.log(\"–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:\",productsUpdate);localStorage.setItem(\"productItems\",JSON.stringify(productsUpdate));console.log(\"–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage:\",JSON.parse(localStorage.getItem(\"productItems\")));dispatch(replacedItem(productsUpdate));dispatch(setParams(updatedFormData));};return/*#__PURE__*/_jsxs(\"div\",{className:styles.wrapper,children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,style:{maxWidth:\"400px\",margin:\"0 auto\"},children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u041D\\u0430\\u0437\\u0432\\u0430\\u043D\\u0438\\u0435 \\u0442\\u043E\\u0432\\u0430\\u0440\\u0430:\",type:\"text\",name:\"title\",value:editData.title,onChange:handleChange,required:true})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"input\",{placeholder:\"\\u0426\\u0435\\u043D\\u0430:\",type:\"number\",name:\"price\",value:editData.price,onChange:handleChange,required:true})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"label\",{children:/*#__PURE__*/_jsx(\"textarea\",{placeholder:\"\\u041E\\u043F\\u0438\\u0441\\u0430\\u043D\\u0438\\u0435:\",name:\"description\",value:editData.description,onChange:handleChange,rows:\"4\",required:true})})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"label\",{children:[\"\\u041A\\u0430\\u0440\\u0442\\u0438\\u043D\\u043A\\u0430:\",/*#__PURE__*/_jsx(\"input\",{className:styles.lastInput,type:\"file\",accept:\"image/*\",onChange:handleImageChange,required:true})]})}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"\\u0421\\u043E\\u0445\\u0440\\u0430\\u043D\\u0438\\u0442\\u044C\"})]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>navigate(\"/test-task/products\"),children:\"\\uD83D\\uDD19\"})]});};export default EditFrom;","map":{"version":3,"names":["React","styles","useDispatch","useSelector","setFormField","setFormImage","replacedItem","setParams","useNavigate","jsx","_jsx","jsxs","_jsxs","EditFrom","_ref","onSubmit","id","dispatch","data","state","editProductSlice","editData","replaceProductSlice","navigate","useEffect","products","JSON","parse","localStorage","getItem","product","find","item","field","value","title","price","description","imageUrl","handleChange","event","name","target","handleImageChange","file","files","reader","FileReader","onloadend","result","readAsDataURL","handleSubmit","preventDefault","handleSaveCard","currentId","updatedFormData","console","log","productsUpdate","map","obj","setItem","stringify","className","wrapper","children","style","maxWidth","margin","placeholder","type","onChange","required","rows","lastInput","accept","onClick"],"sources":["D:/Projects/test-task/src/components/EditForm/index.jsx"],"sourcesContent":["import React from \"react\";\r\nimport styles from \"./EditForm.module.scss\";\r\n\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport {\r\n  setFormField,\r\n  setFormImage,\r\n} from \"../../redux/Slices/replaceProductSlice\";\r\nimport { replacedItem } from \"../../redux/Slices/productSlice\";\r\nimport { setParams } from \"../../redux/Slices/editProductSlice\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst EditFrom = ({ onSubmit, id }) => {\r\n  const dispatch = useDispatch();\r\n  const data = useSelector((state) => state.editProductSlice);\r\n  const editData = useSelector((state) => state.replaceProductSlice);\r\n  const navigate = useNavigate();\r\n  React.useEffect(() => {\r\n    const products = JSON.parse(localStorage.getItem(\"productItems\")) || [];\r\n    const product = products.find((item) => item.id === id);\r\n    if (product) {\r\n      dispatch(setFormField({ field: \"title\", value: product.title }));\r\n      dispatch(setFormField({ field: \"price\", value: product.price }));\r\n      dispatch(\r\n        setFormField({ field: \"description\", value: product.description })\r\n      );\r\n      dispatch(setFormField({ field: \"imageUrl\", value: product.imageUrl }));\r\n    }\r\n  }, [id, dispatch]);\r\n  const handleChange = (event) => {\r\n    const { name, value } = event.target;\r\n    dispatch(setFormField({ field: name, value }));\r\n  };\r\n  const handleImageChange = (event) => {\r\n    const file = event.target.files[0];\r\n    if (file) {\r\n      const reader = new FileReader();\r\n      reader.onloadend = () => {\r\n        dispatch(setFormImage({ ...editData, imageUrl: reader.result }));\r\n      };\r\n      reader.readAsDataURL(file);\r\n    }\r\n  };\r\n  const handleSubmit = (event) => {\r\n    event.preventDefault();\r\n    handleSaveCard();\r\n    if (onSubmit) onSubmit(editData);\r\n  };\r\n  const handleSaveCard = () => {\r\n    const products = JSON.parse(localStorage.getItem(\"productItems\")) || [];\r\n    const currentId = data.id;\r\n    const updatedFormData = { ...editData, id: currentId };\r\n    console.log(\"–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø—Ä–æ–¥—É–∫—Ç–∞:\", updatedFormData);\r\n    const productsUpdate = products.map((obj) =>\r\n      obj.id === data.id ? { ...obj, ...updatedFormData } : obj\r\n    );\r\n    console.log(\"–û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π –º–∞—Å—Å–∏–≤ –ø—Ä–æ–¥—É–∫—Ç–æ–≤:\", productsUpdate);\r\n    localStorage.setItem(\"productItems\", JSON.stringify(productsUpdate));\r\n    console.log(\r\n      \"–î–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ localStorage:\",\r\n      JSON.parse(localStorage.getItem(\"productItems\"))\r\n    );\r\n    dispatch(replacedItem(productsUpdate));\r\n    dispatch(setParams(updatedFormData));\r\n  };\r\n\r\n  return (\r\n    <div className={styles.wrapper}>\r\n      <form\r\n        onSubmit={handleSubmit}\r\n        style={{ maxWidth: \"400px\", margin: \"0 auto\" }}\r\n      >\r\n        <div>\r\n          <label>\r\n            <input\r\n              placeholder=\"–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞:\"\r\n              type=\"text\"\r\n              name=\"title\"\r\n              value={editData.title}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            <input\r\n              placeholder=\"–¶–µ–Ω–∞:\"\r\n              type=\"number\"\r\n              name=\"price\"\r\n              value={editData.price}\r\n              onChange={handleChange}\r\n              required\r\n            />\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            <textarea\r\n              placeholder=\"–û–ø–∏—Å–∞–Ω–∏–µ:\"\r\n              name=\"description\"\r\n              value={editData.description}\r\n              onChange={handleChange}\r\n              rows=\"4\"\r\n              required\r\n            />\r\n          </label>\r\n        </div>\r\n        <div>\r\n          <label>\r\n            –ö–∞—Ä—Ç–∏–Ω–∫–∞:\r\n            <input\r\n              className={styles.lastInput}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={handleImageChange}\r\n              required\r\n            />\r\n          </label>\r\n        </div>\r\n        <button type=\"submit\">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>\r\n      </form>\r\n      <button onClick={() => navigate(\"/test-task/products\")}>üîô</button>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default EditFrom;\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,MAAM,KAAM,wBAAwB,CAE3C,OAASC,WAAW,CAAEC,WAAW,KAAQ,aAAa,CACtD,OACEC,YAAY,CACZC,YAAY,KACP,wCAAwC,CAC/C,OAASC,YAAY,KAAQ,iCAAiC,CAC9D,OAASC,SAAS,KAAQ,qCAAqC,CAC/D,OAASC,WAAW,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,CAAAC,IAAA,IAAAC,KAAA,yBAE/C,KAAM,CAAAC,QAAQ,CAAGC,IAAA,EAAsB,IAArB,CAAEC,QAAQ,CAAEC,EAAG,CAAC,CAAAF,IAAA,CAChC,KAAM,CAAAG,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9B,KAAM,CAAAgB,IAAI,CAAGf,WAAW,CAAEgB,KAAK,EAAKA,KAAK,CAACC,gBAAgB,CAAC,CAC3D,KAAM,CAAAC,QAAQ,CAAGlB,WAAW,CAAEgB,KAAK,EAAKA,KAAK,CAACG,mBAAmB,CAAC,CAClE,KAAM,CAAAC,QAAQ,CAAGf,WAAW,CAAC,CAAC,CAC9BR,KAAK,CAACwB,SAAS,CAAC,IAAM,CACpB,KAAM,CAAAC,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,EAAI,EAAE,CACvE,KAAM,CAAAC,OAAO,CAAGL,QAAQ,CAACM,IAAI,CAAEC,IAAI,EAAKA,IAAI,CAAChB,EAAE,GAAKA,EAAE,CAAC,CACvD,GAAIc,OAAO,CAAE,CACXb,QAAQ,CAACb,YAAY,CAAC,CAAE6B,KAAK,CAAE,OAAO,CAAEC,KAAK,CAAEJ,OAAO,CAACK,KAAM,CAAC,CAAC,CAAC,CAChElB,QAAQ,CAACb,YAAY,CAAC,CAAE6B,KAAK,CAAE,OAAO,CAAEC,KAAK,CAAEJ,OAAO,CAACM,KAAM,CAAC,CAAC,CAAC,CAChEnB,QAAQ,CACNb,YAAY,CAAC,CAAE6B,KAAK,CAAE,aAAa,CAAEC,KAAK,CAAEJ,OAAO,CAACO,WAAY,CAAC,CACnE,CAAC,CACDpB,QAAQ,CAACb,YAAY,CAAC,CAAE6B,KAAK,CAAE,UAAU,CAAEC,KAAK,CAAEJ,OAAO,CAACQ,QAAS,CAAC,CAAC,CAAC,CACxE,CACF,CAAC,CAAE,CAACtB,EAAE,CAAEC,QAAQ,CAAC,CAAC,CAClB,KAAM,CAAAsB,YAAY,CAAIC,KAAK,EAAK,CAC9B,KAAM,CAAEC,IAAI,CAAEP,KAAM,CAAC,CAAGM,KAAK,CAACE,MAAM,CACpCzB,QAAQ,CAACb,YAAY,CAAC,CAAE6B,KAAK,CAAEQ,IAAI,CAAEP,KAAM,CAAC,CAAC,CAAC,CAChD,CAAC,CACD,KAAM,CAAAS,iBAAiB,CAAIH,KAAK,EAAK,CACnC,KAAM,CAAAI,IAAI,CAAGJ,KAAK,CAACE,MAAM,CAACG,KAAK,CAAC,CAAC,CAAC,CAClC,GAAID,IAAI,CAAE,CACR,KAAM,CAAAE,MAAM,CAAG,GAAI,CAAAC,UAAU,CAAC,CAAC,CAC/BD,MAAM,CAACE,SAAS,CAAG,IAAM,CACvB/B,QAAQ,CAACZ,YAAY,CAAC,CAAE,GAAGgB,QAAQ,CAAEiB,QAAQ,CAAEQ,MAAM,CAACG,MAAO,CAAC,CAAC,CAAC,CAClE,CAAC,CACDH,MAAM,CAACI,aAAa,CAACN,IAAI,CAAC,CAC5B,CACF,CAAC,CACD,KAAM,CAAAO,YAAY,CAAIX,KAAK,EAAK,CAC9BA,KAAK,CAACY,cAAc,CAAC,CAAC,CACtBC,cAAc,CAAC,CAAC,CAChB,GAAItC,QAAQ,CAAEA,QAAQ,CAACM,QAAQ,CAAC,CAClC,CAAC,CACD,KAAM,CAAAgC,cAAc,CAAGA,CAAA,GAAM,CAC3B,KAAM,CAAA5B,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CAAC,EAAI,EAAE,CACvE,KAAM,CAAAyB,SAAS,CAAGpC,IAAI,CAACF,EAAE,CACzB,KAAM,CAAAuC,eAAe,CAAG,CAAE,GAAGlC,QAAQ,CAAEL,EAAE,CAAEsC,SAAU,CAAC,CACtDE,OAAO,CAACC,GAAG,CAAC,8BAA8B,CAAEF,eAAe,CAAC,CAC5D,KAAM,CAAAG,cAAc,CAAGjC,QAAQ,CAACkC,GAAG,CAAEC,GAAG,EACtCA,GAAG,CAAC5C,EAAE,GAAKE,IAAI,CAACF,EAAE,CAAG,CAAE,GAAG4C,GAAG,CAAE,GAAGL,eAAgB,CAAC,CAAGK,GACxD,CAAC,CACDJ,OAAO,CAACC,GAAG,CAAC,+BAA+B,CAAEC,cAAc,CAAC,CAC5D9B,YAAY,CAACiC,OAAO,CAAC,cAAc,CAAEnC,IAAI,CAACoC,SAAS,CAACJ,cAAc,CAAC,CAAC,CACpEF,OAAO,CAACC,GAAG,CACT,kCAAkC,CAClC/B,IAAI,CAACC,KAAK,CAACC,YAAY,CAACC,OAAO,CAAC,cAAc,CAAC,CACjD,CAAC,CACDZ,QAAQ,CAACX,YAAY,CAACoD,cAAc,CAAC,CAAC,CACtCzC,QAAQ,CAACV,SAAS,CAACgD,eAAe,CAAC,CAAC,CACtC,CAAC,CAED,mBACE3C,KAAA,QAAKmD,SAAS,CAAE9D,MAAM,CAAC+D,OAAQ,CAAAC,QAAA,eAC7BrD,KAAA,SACEG,QAAQ,CAAEoC,YAAa,CACvBe,KAAK,CAAE,CAAEC,QAAQ,CAAE,OAAO,CAAEC,MAAM,CAAE,QAAS,CAAE,CAAAH,QAAA,eAE/CvD,IAAA,QAAAuD,QAAA,cACEvD,IAAA,UAAAuD,QAAA,cACEvD,IAAA,UACE2D,WAAW,CAAC,wFAAkB,CAC9BC,IAAI,CAAC,MAAM,CACX7B,IAAI,CAAC,OAAO,CACZP,KAAK,CAAEb,QAAQ,CAACc,KAAM,CACtBoC,QAAQ,CAAEhC,YAAa,CACvBiC,QAAQ,MACT,CAAC,CACG,CAAC,CACL,CAAC,cACN9D,IAAA,QAAAuD,QAAA,cACEvD,IAAA,UAAAuD,QAAA,cACEvD,IAAA,UACE2D,WAAW,CAAC,2BAAO,CACnBC,IAAI,CAAC,QAAQ,CACb7B,IAAI,CAAC,OAAO,CACZP,KAAK,CAAEb,QAAQ,CAACe,KAAM,CACtBmC,QAAQ,CAAEhC,YAAa,CACvBiC,QAAQ,MACT,CAAC,CACG,CAAC,CACL,CAAC,cACN9D,IAAA,QAAAuD,QAAA,cACEvD,IAAA,UAAAuD,QAAA,cACEvD,IAAA,aACE2D,WAAW,CAAC,mDAAW,CACvB5B,IAAI,CAAC,aAAa,CAClBP,KAAK,CAAEb,QAAQ,CAACgB,WAAY,CAC5BkC,QAAQ,CAAEhC,YAAa,CACvBkC,IAAI,CAAC,GAAG,CACRD,QAAQ,MACT,CAAC,CACG,CAAC,CACL,CAAC,cACN9D,IAAA,QAAAuD,QAAA,cACErD,KAAA,UAAAqD,QAAA,EAAO,mDAEL,cAAAvD,IAAA,UACEqD,SAAS,CAAE9D,MAAM,CAACyE,SAAU,CAC5BJ,IAAI,CAAC,MAAM,CACXK,MAAM,CAAC,SAAS,CAChBJ,QAAQ,CAAE5B,iBAAkB,CAC5B6B,QAAQ,MACT,CAAC,EACG,CAAC,CACL,CAAC,cACN9D,IAAA,WAAQ4D,IAAI,CAAC,QAAQ,CAAAL,QAAA,CAAC,wDAAS,CAAQ,CAAC,EACpC,CAAC,cACPvD,IAAA,WAAQkE,OAAO,CAAEA,CAAA,GAAMrD,QAAQ,CAAC,qBAAqB,CAAE,CAAA0C,QAAA,CAAC,cAAE,CAAQ,CAAC,EAChE,CAAC,CAEV,CAAC,CAED,cAAe,CAAApD,QAAQ","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}